"use strict";var Price=window.Price||{};(Price=function(e){this.$price=$(e),this.init()}).prototype.init=function(){var e=this;e.$price.on("DOMNodeInserted",function(){e.update()}),e.update()},Price.prototype.update=function(){var e=this;if(-1===e.$price.text().indexOf(" ")){for(var p=[],t=e.$price.text().split("").reverse(),o=0;o<t.length;o++)p.push(t[o]),(o+1)%3==0&&p.push(" ");e.$price.text(p.reverse().join(""))}},$.fn.price=function(){var e,p,t=this,o=arguments[0],s=Array.prototype.slice.call(arguments,1),r=t.length;for(e=0;e<r;e++)if("object"==typeof o||void 0===o?t[e].price=new Price(t[e],o):p=t[e].price[o].apply(t[e].price,s),void 0!==p)return p;return t},$(function(){var a={};function e(){$("img.img-svg").each(function(){var p,t=$(this),o=t.attr("id"),s=t.attr("class"),r=t.attr("src");void 0!==a[r]?(p=$(a[r]),void 0!==s&&(p=p.attr("class",s+" replaced-svg")),t.replaceWith(p)):$.ajax({url:r,async:!1,dataType:"xml",success:function(e){p=$(e).find("svg"),void 0!==o&&(p=p.attr("id",o)),!(p=p.removeAttr("xmlns:a")).attr("viewBox")&&p.attr("height")&&p.attr("width")&&p.attr("viewBox","0 0 "+p.attr("height")+" "+p.attr("width")),a[r]=p[0].outerHTML,void 0!==s&&(p=p.attr("class",s+" replaced-svg")),t.replaceWith(p)}})})}function p(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",e+"px");var p=document.querySelector(".root"),t=window.innerWidth-p.clientWidth;document.documentElement.style.setProperty("--scroll-width",t+"px")}e(),$("body").on("DOMNodeInserted",function(){e()}),window.addEventListener("resize",p),p(),$(".formfield__input, .formfield__textarea").on({focusin:function(){$(this).parent(".formfield").addClass("formfield_focus")},focusout:function(){$(this).val()||$(this).parent(".formfield").removeClass("formfield_focus")}}),$(document).ready(function(){$(".formfield__input, .formfield__textarea").each(function(){$(this).val().length&&$(this).parent(".formfield").addClass("formfield_focus"),$(this).attr("disabled")&&$(this).parent(".formfield").addClass("formfield_disabled")})}),$(".menu__products-preview").switchPopup({displayClass:"menu__products-preview_display",visibleClass:"menu__products-preview_visible",duration:300,btnClass:"js-tgl-products-preview",overflow:!1}),$(".menu__products-preview").on("beforeOpen",function(){$(".btn-products").addClass("btn-products_open")}),$(".menu__products-preview").on("beforeClose",function(){$(".btn-products").removeClass("btn-products_open")}),$(".menu__wrap").switchPopup({displayClass:"menu__wrap_display",visibleClass:"menu__wrap_visible",duration:300,btnClass:"js-tgl-menu",overflow:!1}),$(".menu__wrap").on("beforeOpen",function(){$(".btn-burger").addClass("btn-burger_open")}),$(".menu__wrap").on("beforeClose",function(){$(".btn-burger").removeClass("btn-burger_open")});var t=$(".root").scrollTop(),o=t;$(".root").on("scroll",function(){(t=$(".root").scrollTop())<o?$(".header").hasClass("header_hide")&&$(".header").removeClass("header_hide"):$(".header").hasClass("header_hide")||100<t&&($(".header").addClass("header_hide"),$(".menu__products-preview").switchPopup("close")),o=t}),$(".js-price").each(function(e,p){$(p).price()}),$(".accordion__btn").on("click",function(){var e=$(this).parents(".accordion__item");e.hasClass("accordion__item_open")?e.removeClass("accordion__item_open"):e.addClass("accordion__item_open")}),$(document).ready(function(){$(window).width()<768&&$(".accordion__item").removeClass("accordion__item_open")}),$("form").each(function(e,p){var t,o=$(p).find('input[type="checkbox"]'),s=$(p).find('button[type="submit"]');o.each(function(e,p){-1!==p.id.toLowerCase().indexOf("politconf")&&(t=$(p))}),t&&t.length&&s&&s.length&&(s.attr("disabled",!t[0].checked),t.on("change",function(){s.attr("disabled",!t[0].checked)}))}),$(".textarea-spoiler__toggle").on("click",function(){var e=$(this).parents(".textarea-spoiler");e.hasClass("textarea-spoiler_open")?(e.removeClass("textarea-spoiler_open"),e.children(".textarea-spoiler__body").slideUp()):(e.addClass("textarea-spoiler_open"),e.children(".textarea-spoiler__body").slideDown())}),$(".popup-buy").switchPopup({pageScrollClass:"root",btnClass:"js-tgl-popup-buy",displayClass:"popup-buy_display",visibleClass:"popup-buy_visible",duration:300}),$(".popup-buy-wrap__content").switchPopup({displayClass:"popup-buy-wrap__content_display",visibleClass:"popup-buy-wrap__content_visible",duration:200}),$(".popup-buy-wrap__end").switchPopup({displayClass:"popup-buy-wrap__end_display",visibleClass:"popup-buy-wrap__end_visible",duration:200}),$(".popup-buy").on("afterClose",function(){$(".popup-buy-wrap").hasClass("popup-buy-wrap_success")&&($(".popup-buy-wrap__content").switchPopup("open"),$(".popup-buy-wrap__end").switchPopup("close"),$(".popup-buy-wrap").removeClass("popup-buy-wrap_success"),$(".popup-buy-wrap").css("height",""))}),$(".popup-buy-wrap").on("submit",function(e){e.preventDefault();var o=$(this),p=new FormData(this),t=$('meta[name="csrf-param"]').attr("content"),s=$('meta[name="csrf-token"]').attr("content");p[t]=s,$.ajax({url:o.attr("action"),method:o.attr("method"),async:!1,data:p,processData:!1,contentType:!1,success:function(e){var t=JSON.parse(e);if(t.success){$(".popup-buy-wrap__content").switchPopup("close");var p=$(".popup-buy-wrap").css("height");$(".popup-buy-wrap").css("height",p),setTimeout(function(){$(".popup-buy-wrap").animate({height:"80px"},500)},200),setTimeout(function(){$(".popup-buy-wrap").addClass("popup-buy-wrap_success")},700),setTimeout(function(){$(".popup-buy-wrap__end").switchPopup("open")},1e3),setTimeout(function(){$(".popup-buy").switchPopup("close")},3e3)}else $(".formfield").each(function(e,p){$(p).removeClass(".formfield_error"),$(p).children(".formfield__msg").remove()}),"object"==typeof t.message&&Object.keys(t.message).forEach(function(e){var p=o.find('[name="'+e+'"]').parent(".formfield");p.addClass("formfield_error"),p.append('<span class="formfield__msg">'+t.message[e]+"</span>")})}})}),$(".popup-product").switchPopup({pageScrollClass:"root",btnClass:"js-tgl-popup-product",displayClass:"popup-product_display",visibleClass:"popup-product_visible",duration:300}),$(".popup-product-wrap__content").switchPopup({displayClass:"popup-product-wrap__content_display",visibleClass:"popup-product-wrap__content_visible",duration:200}),$(".popup-product-wrap__end").switchPopup({displayClass:"popup-product-wrap__end_display",visibleClass:"popup-product-wrap__end_visible",duration:200}),$(".popup-product").on("afterClose",function(){$(".popup-product-wrap").hasClass("popup-product-wrap_success")&&($(".popup-product-wrap__content").switchPopup("open"),$(".popup-product-wrap__end").switchPopup("close"),$(".popup-product-wrap").removeClass("popup-product-wrap_success"),$(".popup-product-wrap").css("height",""))}),$(".popup-product-wrap").on("submit",function(e){e.preventDefault();var o=$(this),p=new FormData(this),t=$('meta[name="csrf-param"]').attr("content"),s=$('meta[name="csrf-token"]').attr("content");p[t]=s,$.ajax({url:o.attr("action"),method:o.attr("method"),async:!1,data:p,processData:!1,contentType:!1,success:function(e){var t=JSON.parse(e);if(t.success){$(".popup-product-wrap__content").switchPopup("close");var p=$(".popup-product-wrap").css("height");$(".popup-product-wrap").css("height",p),setTimeout(function(){$(".popup-product-wrap").animate({height:"80px"},500)},200),setTimeout(function(){$(".popup-product-wrap").addClass("popup-product-wrap_success")},700),setTimeout(function(){$(".popup-product-wrap__end").switchPopup("open")},1e3),setTimeout(function(){$(".popup-product").switchPopup("close")},3e3)}else $(".formfield").each(function(e,p){$(p).removeClass(".formfield_error"),$(p).children(".formfield__msg").remove()}),"object"==typeof t.message&&Object.keys(t.message).forEach(function(e){var p=o.find('[name="'+e+'"]').parent(".formfield");p.addClass("formfield_error"),p.append('<span class="formfield__msg">'+t.message[e]+"</span>")})}})})});
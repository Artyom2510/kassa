"use strict";function init(){var t=new ymaps.Map("map",{center:[55.7536,37.621218],zoom:9,controls:["smallMapDefaultSet"]},{searchControlProvider:"yandex#search"}),o=new ymaps.Clusterer({clusterIcons:[{href:"img/ui-icon/pin-cluster.svg",size:[54,61],offset:[-27,-30]}],clusterNumbers:[10]}),a=$(".popup-map");a.switchPopup({btnClass:"js-tgl-popup-map",duration:"300",overflow:!1}),t.panes.get("ground").getElement().style.filter="grayscale(100%) invert(5%)";function i(e){var s=ymaps.geoQuery({type:"FeatureCollection",features:e.map(function(e){return{type:"Feature",geometry:{type:"Point",coordinates:""!==(t=e).coords?[+(o=t.coords).split(",")[0],+o.split(",")[1]]:[0,0]},properties:{name:t.nameCompany,info:{phone:t.phone,address:t.addr,email:t.email,site:t.site}},options:{id:t.id,iconLayout:"default#image",iconImageHref:"img/ui-icon/pin.svg",iconImageSize:[54,61],iconImageOffset:[-27,-30]}};var t,o})});var n=null;s.addEvents("click",function(e){var t,o=e.get("target").properties._data,i=e.get("target").options._options.id;!function(e){$(".js-popup-name").text(e.name);var t=e.info,o=1;Object.keys(t).forEach(function(e){$(".js-list-popup").find(".map-list__item:nth-child("+o+") p").text(t[e]),o++})}(o),a.hasClass("display")||a.switchPopup("open"),t=i,n&&s._objects[n].options.set({iconLayout:"default#image",iconImageHref:"img/ui-icon/pin.svg",iconImageSize:[54,61],iconImageOffset:[-27,-30]}),Object.keys(s._objects).forEach(function(e){s._objects[e].options._options.id===t&&(n=e,s._objects[e].options.set({iconLayout:"default#image",iconImageHref:"img/ui-icon/pin-active.svg",iconImageSize:[54,61],iconImageOffset:[-27,-30]}))})}),o.add(s._objects),t.geoObjects.add(o)}$.ajax({url:"test.php",dataType:"json",success:function(e){i(e.data)},error:function(){console.log("ошибка сервера")}})}$(function(){var e=$(".js-partner-sl"),t=$(".js-partner-prev"),o=$(".js-partner-next");e.length&&e.slick({infinite:!0,dots:!1,arrows:!1,slidesToShow:6,slidesToScroll:1,adaptiveHeight:!0,swipeToSlide:!0,speed:300,cssEase:"ease",responsive:[{breakpoint:1279,settings:{slidesToShow:4,slidesToScroll:2,rows:2}},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,rows:2}}]}),e.length&&t.length&&t.on("click",function(){e.slick("slickPrev")}),e.length&&o.length&&o.on("click",function(){e.slick("slickNext")})}),ymaps.ready(init);